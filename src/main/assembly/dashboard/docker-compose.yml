version: '2.1'

services:
  influxdb:
    image: influxdb:1.7.9
    container_name: influxdb
    ports:
      - "8086:8086"
    environment:
      - "INFLUXDB_REPORTING_DISABLED=false"
    restart: on-failure
  grafana:
    image: grafana/grafana:5.3.2
    ports:
      - "3000:3000"
    restart: on-failure
    links:
      - influxdb
  dashboard-installer:
    image: redisrdbcli/dashboard-installer:v1.0.2
    command: ["grafana:3000"]
    volumes:
      - ./config/datasource.json:/datasource.json:ro
      - ./config/endpoint.json:/endpoint.json:ro
      - ./config/memory.json:/memory.json:ro
      - ./config/dests.json:/dests.json:ro
    restart: on-failure
